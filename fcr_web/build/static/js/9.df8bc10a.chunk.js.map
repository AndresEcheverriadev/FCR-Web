{"version":3,"sources":["components/LoginPage/LoginPage.js","Services/LocalStorageService.js","Services/HTTPRequestService.js","Services/AuthService.js","images/logo.svg"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","_images_logo_svg__WEBPACK_IMPORTED_MODULE_3__","_images_logo_svg__WEBPACK_IMPORTED_MODULE_3___default","react_helmet_async__WEBPACK_IMPORTED_MODULE_4__","_Services_AuthService__WEBPACK_IMPORTED_MODULE_6__","LoginPage","navigate","useNavigate","password","setPassword","useState","React","createElement","Fragment","HelmetProvider","Helmet","name","content","rel","href","className","NavLink","to","src","logo","alt","htmlFor","type","onChange","e","target","value","onClick","async","AuthService","login","success","alert","window","location","reload","d","LocalStorageService","getItem","data","sessionStorage","key","JSON","parse","setItem","stringify","removeItem","clearAll","clear","HTTPRequestService","axios__WEBPACK_IMPORTED_MODULE_0__","_AuthService_js__WEBPACK_IMPORTED_MODULE_1__","_LocalStorageService_js__WEBPACK_IMPORTED_MODULE_2__","get","token","axios","url","headers","Authorization","error","response","status","statusText","logout","replace","console","post","postImage","Content-Type","remove","delete","_LocalStorageService_js__WEBPACK_IMPORTED_MODULE_0__","_HTTPRequestService_js__WEBPACK_IMPORTED_MODULE_1__","process","user","register","userName","_ref","REACT_APP_API_REGISTER_URL","checkToken","module","exports","p"],"mappings":"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","file":"static/js/9.df8bc10a.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport logo from \"../../images/logo.svg\";\r\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\r\nimport \"./LoginPage.css\";\r\nimport { AuthService } from \"../../Services/AuthService\";\r\n\r\nfunction LoginPage() {\r\n  const navigate = useNavigate();\r\n  // const [user, setUser] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  async function handleLogin() {\r\n    const auth = await AuthService.login(password);\r\n    if (auth.success === true) {\r\n      navigate(\"/manager\");\r\n    } else {\r\n      alert(\"Password incorrecto\");\r\n      setPassword(\"\");\r\n      window.location.reload(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <HelmetProvider>\r\n        <Helmet>\r\n          <meta name=\"robots\" content=\"noindex, nofollow\" />\r\n          <title>Servicios Funerarios Cristo Rey Angol-Login</title>\r\n          <link rel=\"canonical\" href=\"https://www.cristoreyangol.cl/\" />\r\n        </Helmet>\r\n      </HelmetProvider>\r\n      <div className=\"loginPageMainWrapper\">\r\n        <NavLink to=\"/\" className=\"loginLogoContainer\">\r\n          <img src={logo} alt=\"\" />\r\n        </NavLink>\r\n        <div className=\"loginInputContainer\">\r\n          <h4>Login Obituario</h4>\r\n          <h5>Introduzca sus credenciales</h5>\r\n          {/* <label htmlFor=\"email\">email</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"email\"\r\n            onChange={(e) => setMail(e.target.value)}\r\n          /> */}\r\n          <label htmlFor=\"password\">password</label>\r\n          <input\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            name=\"password\"\r\n          />\r\n          <button onClick={handleLogin}>Entrar</button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","const getItem = async (key) => {\r\n  const data = sessionStorage.getItem(key);\r\n  return JSON.parse(data);\r\n};\r\n\r\nconst setItem = async (key, value) => {\r\n  sessionStorage.setItem(key, JSON.stringify(value));\r\n};\r\n\r\nconst removeItem = async (key) => sessionStorage.removeItem(key);\r\n\r\nconst clearAll = async () => sessionStorage.clear();\r\n\r\nexport const LocalStorageService = { getItem, setItem, removeItem, clearAll };\r\n","import axios from \"axios\";\r\nimport { AuthService } from \"./AuthService.js\";\r\nimport { LocalStorageService } from \"./LocalStorageService.js\";\r\n\r\nconst get = async (url) => {\r\n  const token = LocalStorageService.getItem(\"token\");\r\n  try {\r\n    const response = await axios.get(url, {\r\n      headers: { Authorization: token },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    if (\r\n      error.response.status === 401 &&\r\n      error.response.statusText === \"Request no autorizado\"\r\n    ) {\r\n      AuthService.logout();\r\n      window.location.replace(\"/\");\r\n      return;\r\n    }\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nconst post = async (url, data) => {\r\n  const token = LocalStorageService.getItem(\"token\");\r\n  try {\r\n    const response = await axios.post(url, data, {\r\n      headers: { Authorization: token },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    if (\r\n      error.response.status === 401 &&\r\n      error.response.statusText === \"Unauthorized\"\r\n    ) {\r\n      AuthService.logout();\r\n      window.location.replace(\"/\");\r\n      return;\r\n    }\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nconst postImage = async (url, data) => {\r\n  const token = LocalStorageService.getItem(\"token\");\r\n  try {\r\n    const response = await axios.post(url, data, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n        Authorization: token,\r\n      },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    if (\r\n      error.response.status === 401 &&\r\n      error.response.statusText === \"Unauthorized\"\r\n    ) {\r\n      AuthService.logout();\r\n      window.location.replace(\"/\");\r\n      return;\r\n    }\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nconst remove = async (url) => {\r\n  const token = LocalStorageService.getItem(\"token\");\r\n  try {\r\n    const response = await axios.delete(url, {\r\n      headers: { Authorization: token },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    if (\r\n      error.response.status === 401 &&\r\n      error.response.statusText === \"Request no autorizado\"\r\n    ) {\r\n      AuthService.logout();\r\n      window.location.replace(\"/\");\r\n      return;\r\n    }\r\n    console.error(error);\r\n  }\r\n};\r\n\r\nexport const HTTPRequestService = { get, post, postImage, remove };\r\n","import { LocalStorageService } from \"./LocalStorageService.js\";\r\nimport { HTTPRequestService } from \"./HTTPRequestService.js\";\r\n\r\nconst login = async (password) => {\r\n  try {\r\n    // const checkToken = await checkToken();\r\n    // if (checkToken) {\r\n    //   logout();\r\n    // }\r\n    const { data } = await HTTPRequestService.post(\r\n      process.env.REACT_APP_SERVER_URL_LOGIN,\r\n      {\r\n        password,\r\n      }\r\n    );\r\n    if (data.status === 200 && data.data) {\r\n      LocalStorageService.setItem(\"token\", data.data);\r\n      return { success: true, user: data.data.user };\r\n    }\r\n    return { success: false };\r\n  } catch (error) {\r\n    return { success: false };\r\n  }\r\n};\r\n\r\nconst register = async ({ userName, password }) => {\r\n  try {\r\n    const { data } = await HTTPRequestService.post(\r\n      process.env.REACT_APP_API_REGISTER_URL,\r\n      {\r\n        userName,\r\n        password,\r\n      }\r\n    );\r\n    return { success: data.status === 200 };\r\n  } catch (error) {\r\n    return { success: false };\r\n  }\r\n};\r\n\r\nconst checkToken = async () => {\r\n  try {\r\n    const token = await LocalStorageService.getItem(\"token\");\r\n    if (!token) return { success: false };\r\n    return { success: true, user: true };\r\n  } catch (error) {\r\n    return { success: false };\r\n  }\r\n};\r\n\r\nconst logout = async () => {\r\n  try {\r\n    const deleteToken = await LocalStorageService.removeItem(\"token\");\r\n    if (!deleteToken) return { success: false };\r\n    return { success: true };\r\n  } catch (error) {\r\n    return { success: false };\r\n  }\r\n};\r\n\r\nexport const AuthService = { login, register, checkToken, logout };\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.c41d0683.svg\";"],"sourceRoot":""}