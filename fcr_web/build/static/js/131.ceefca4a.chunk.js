"use strict";(self.webpackChunkfcr_web=self.webpackChunkfcr_web||[]).push([[131],{8058:function(e,t,r){r.d(t,{e:function(){return l}});var n=r(4165),s=r(5861),a=r(2764),u=r(1930),o=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.l.post("https://www.cristoreyangol.cl:8080/user/auth",{mail:t,password:r});case 3:if(s=e.sent,200!==(o=s.data).status||!o.data){e.next=8;break}return a.n.setItem("token",o.data),e.abrupt("return",{success:!0,user:o.data.user});case 8:return e.abrupt("return",{success:!1});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),c=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userName,s=t.password,e.prev=1,e.next=4,u.l.post({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GTM_ID:"G-80E5Y9MEL8",REACT_APP_PASSOBITUARIO:"c#9o9te4JLCnm5?A",REACT_APP_SERVER_URL_ADD:"https://www.cristoreyangol.cl:8080/createRecord/add",REACT_APP_SERVER_URL_ADDIMAGE:"https://www.cristoreyangol.cl:8080/createRecord/addImage",REACT_APP_SERVER_URL_DELETE:"https://www.cristoreyangol.cl:8080/createRecord",REACT_APP_SERVER_URL_LOGIN:"https://www.cristoreyangol.cl:8080/user/auth",REACT_APP_SERVER_URL_MESAGGES:"https://www.cristoreyangol.cl:8080/record/updateMensajes",REACT_APP_SERVER_URL_RECORD:"https://www.cristoreyangol.cl:8080/record",REACT_APP_SERVER_URL_UPDATE_FUNERAL:"https://www.cristoreyangol.cl:8080/createRecord/updateFuneral",REACT_APP_SERVER_URL_UPDATE_PERSONALES:"https://www.cristoreyangol.cl:8080/createRecord/updatePersonales"}.REACT_APP_API_REGISTER_URL,{userName:r,password:s});case 4:return a=e.sent,o=a.data,e.abrupt("return",{success:200===o.status});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.n.getItem("token");case 3:if(e.sent){e.next=6;break}return e.abrupt("return",{success:!1});case 6:return e.abrupt("return",{success:!0,user:!0});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(alert("logout"),e.prev=1,a.n.removeItem("token")){e.next=5;break}return e.abrupt("return",{success:!1});case 5:return e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l={login:o,register:c,checkToken:i,logout:p}},1930:function(e,t,r){r.d(t,{l:function(){return d}});var n=r(4165),s=r(5861),a=r(1243),u=r(8058),o=r(2764),c=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.n.getItem("token"),e.prev=1,e.next=4,a.Z.get(t,{headers:{Authorization:r}});case 4:return s=e.sent,e.abrupt("return",s);case 8:if(e.prev=8,e.t0=e.catch(1),401!==e.t0.response.status||"Request no autorizado"!==e.t0.response.statusText){e.next=14;break}return u.e.logout(),window.location.replace("/"),e.abrupt("return");case 14:console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.n.getItem("token"),e.prev=1,e.next=4,a.Z.post(t,r,{headers:{Authorization:s}});case 4:return c=e.sent,e.abrupt("return",c);case 8:if(e.prev=8,e.t0=e.catch(1),401!==e.t0.response.status||"Unauthorized"!==e.t0.response.statusText){e.next=14;break}return u.e.logout(),window.location.replace("/"),e.abrupt("return");case 14:console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.n.getItem("token"),e.prev=1,e.next=4,a.Z.post(t,r,{headers:{"Content-Type":"multipart/form-data",Authorization:s}});case 4:return c=e.sent,e.abrupt("return",c);case 8:if(e.prev=8,e.t0=e.catch(1),401!==e.t0.response.status||"Unauthorized"!==e.t0.response.statusText){e.next=14;break}return u.e.logout(),window.location.replace("/"),e.abrupt("return");case 14:console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.n.getItem("token"),e.prev=1,e.next=4,a.Z.delete(t,{headers:{Authorization:r}});case 4:return s=e.sent,e.abrupt("return",s);case 8:if(e.prev=8,e.t0=e.catch(1),401!==e.t0.response.status||"Request no autorizado"!==e.t0.response.statusText){e.next=14;break}return u.e.logout(),window.location.replace("/"),e.abrupt("return");case 14:console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),d={get:c,post:i,postImage:p,remove:l}},2764:function(e,t,r){r.d(t,{n:function(){return n}});var n={getItem:function(e){var t=sessionStorage.getItem(e);return JSON.parse(t)},setItem:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},removeItem:function(e){return sessionStorage.removeItem(e)},clearAll:function(){return sessionStorage.clear()}}},1131:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=r(4165),s=r(5861),a=r(885),u=r(2791),o=r(7689),c=r(1087);var i=r.p+"static/media/logo.31f66cf914b93d1e468cff4004691119.svg",p=r(6907),l=r(8058),d=r(184);var f=function(){var e=(0,o.s0)(),t=(0,u.useState)(""),r=(0,a.Z)(t,2),f=r[0],h=r[1],w=(0,u.useState)(""),v=(0,a.Z)(w,2),R=v[0],_=v[1];function E(){return(E=(0,s.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.e.login(f,R);case 2:!0===t.sent.success?e("/manager"):(alert("Password incorrecto"),h(""),_(""),window.location.reload(!1));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.B6,{children:(0,d.jsxs)(p.ql,{children:[(0,d.jsx)("meta",{name:"robots",content:"noindex, nofollow"}),(0,d.jsx)("title",{children:"Servicios Funerarios Cristo Rey Angol"})]})}),(0,d.jsxs)("div",{className:"loginPageMainWrapper",children:[(0,d.jsx)(c.OL,{to:"/",className:"loginLogoContainer",children:(0,d.jsx)("img",{src:i,alt:""})}),(0,d.jsxs)("div",{className:"loginInputContainer",children:[(0,d.jsx)("h4",{children:"Login Obituario"}),(0,d.jsx)("h5",{children:"Introduzca sus credenciales"}),(0,d.jsx)("label",{htmlFor:"email",children:"email"}),(0,d.jsx)("input",{type:"text",name:"email",onChange:function(e){return h(e.target.value)}}),(0,d.jsx)("label",{htmlFor:"password",children:"password"}),(0,d.jsx)("input",{type:"password",onChange:function(e){return _(e.target.value)},name:"password"}),(0,d.jsx)("button",{onClick:function(){return E.apply(this,arguments)},children:"Entrar"})]})]})]})}}}]);
//# sourceMappingURL=131.ceefca4a.chunk.js.map